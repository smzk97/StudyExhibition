from APP import *
app=init()
with app.app_context():

    """删除原有数据，防止重复赋值"""
    db.session.query(Books).delete()
    db.session.query(Tip).delete()
    db.session.commit()

    book_data = [
        {
            "title": "Python算法设计与分析",
            "author": "王硕，董文馨，张舒行",
            "publisher": "人民邮电出版社",
            "isbn": "9787115529008",
            "tip": "算法",
            "info": "本书系统讲解Python语言在算法设计与分析中的应用，涵盖从基础到进阶的各类算法。包括排序算法（冒泡、快排、归并）、查找算法（线性、二分、哈希）、动态规划、贪心算法、图论算法等核心内容。通过Python代码实现具体算法案例，搭配详细注释帮助理解逻辑，同时深入分析算法的时间复杂度与空间复杂度，指导读者根据实际场景选择最优算法解决方案。书中结合工程应用实例，将理论与实践结合，适合Python开发者与算法学习者提升算法设计能力。",
            "cover_image_page": "img/Python算法设计与分析.jpg",
            "pdf_path": "pdf/Python算法设计与分析.pdf"
        },
        {
            "title": "Python程序设计",
            "author": "董付国",
            "publisher": "清华大学出版社",
            "isbn": "9787302663799",
            "tip": "语言",
            "info": "本书从Python基础语法入手，循序渐进讲解编程知识。涵盖变量类型、运算符、流程控制结构等基础知识，深入介绍函数、类与对象、模块等面向对象编程特性。通过实际案例展示Python在文件操作、数据库交互、数据处理与可视化等领域的应用，包含学生信息管理系统、数据分析工具等实用项目练习。既适合编程新手入门学习，也可作为高校Python课程教材，帮助读者构建系统化编程思维，提升Python实践能力。",
            "cover_image_page": "img/Python程序设计.jpg",
            "pdf_path": "pdf/Python程序设计.pdf"
        },
        {
            "title": "计算机组成原理",
            "author": "白中英，戴志涛",
            "publisher": "科学出版社",
            "isbn": "9787030619716",
            "tip": "硬件",
            "info": "本书系统剖析计算机硬件体系结构与工作原理，是理解计算机底层运行机制的核心读物。内容包括中央处理单元（CPU）的组成与功能、存储器层次结构（Cache、主存、辅助存储）、系统总线工作机制、输入输出系统原理等。详细讲解指令系统、指令周期、流水线技术等关键概念，通过示意图与时序图帮助理解抽象原理，建立硬件与软件的关联认知，为计算机专业学习和硬件开发提供底层理论支撑。",
            "cover_image_page": "img/计算机组成原理.jpg",
            "pdf_path": "pdf/计算机组成原理.pdf"
        },
        {
            "title": "离散数学及其应用",
            "author": "屈婉玲，耿素云，张立昂",
            "publisher": "高等教育出版社",
            "isbn": "9787040500387",
            "tip": "数理",
            "info": "本书涵盖离散数学五大核心模块：数理逻辑、集合论、图论、组合数学和代数结构简介。数理逻辑部分培养逻辑推理能力，集合论为数据结构提供理论基础，图论讲解图的性质与算法，组合数学解决计数问题，代数结构简介为密码学等领域铺垫基础。结合计算机科学、通信工程等领域的应用案例，将抽象数理知识与实际场景结合，适合计算机、人工智能相关专业学生及科研人员阅读。",
            "cover_image_page": "img/离散数学及其应用.jpg",
            "pdf_path": "pdf/离散数学及其应用.pdf"
        },
        {
            "title": "概率论与数理统计",
            "author": "桂文豪，王立春，孔令臣",
            "publisher": "清华大学出版社",
            "isbn": "9787512149496",
            "tip": "数理",
            "info": "本书围绕随机现象规律分析与数据统计推断展开，是数据分析与人工智能领域的重要工具。概率论部分讲解随机事件、概率计算、随机变量及其分布；数理统计部分介绍抽样分布、参数估计、假设检验、回归分析等核心方法。通过金融风险预测、产品质量检验等实际案例，结合数据计算与可视化辅助理解，帮助读者掌握用概率统计解决实际问题的能力，适合数据分析师、科研人员等阅读学习。",
            "cover_image_page": "img/概率论与数理统计.jpg",
            "pdf_path": "pdf/概率论与数理统计.pdf"
        },
        {
            "title": "马克思主义基本原理",
            "author": "本书编写组",
            "publisher": "高等教育出版社",
            "isbn": "9787040599008",
            "tip": "政治",
            "info": "本书系统阐释马克思主义理论体系，包括马克思主义哲学、政治经济学和科学社会主义三大板块。马克思主义哲学部分讲解辩证唯物主义和历史唯物主义基本原理；政治经济学剖析资本主义经济规律；科学社会主义阐述社会主义发展历程与本质特征。结合时代背景解读理论内涵，引导读者用马克思主义立场、观点、方法分析社会问题，是学习马克思主义理论、提升政治素养的基础读物。",
            "cover_image_page": "img/马克思主义基本原理.jpg",
            "pdf_path": "pdf/马克思主义基本原理.pdf"
        },
        {
            "title": "时事报告大学生版",
            "author": "编写组",
            "publisher": "时事报告杂志社",
            "isbn": "1674683",
            "tip": "政治",
            "info": "本书聚焦大学生关注的时事热点，解读国内外重大政治、经济、文化事件。内容包括国内政策解读（国家战略、民生政策、重要会议精神）、国际形势分析（大国关系、全球经济动态），并设置大学生视角板块探讨青年关注话题。通过数据图表、专家评论辅助理解，帮助大学生及时掌握时事动态，培养政治敏锐性与社会责任感，是高校思想政治教育的重要辅助材料。",
            "cover_image_page": "img/时事报告大学生版.jpg",
            "pdf_path": "pdf/时事报告大学生版.pdf"
        }
    ]

    """补充Tip表"""
    tip_data ={book.get('tip') for book in book_data}
    for tip in tip_data:
        t=Tip(name=tip)
        db.session.add(t)
    db.session.commit()

    """补充Books表"""
    tip_map={mid.name:mid.id for mid in Tip.query.all()}   #获取映射
    for mid in book_data:
        mid['tip_id']=tip_map.get(mid.get('tip'))

    for mid in book_data:
        b=Books(**mid)
        db.session.add(b)
    db.session.commit()
